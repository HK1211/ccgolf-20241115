CREATE SCHEMA IF NOT EXISTS SHARED_CODE;

-- 통합 시퀀스(채번) 관리 테이블 생성
CREATE TABLE if not exists `SHARED_CODE`.`SHARED_CODE_SEQ_MANAGEMENT` (
    `SHARED_CODE_SEQ_MANAGEMENT_SEQ` BIGINT NOT NULL AUTO_INCREMENT COMMENT '채번 SEQ',
    `TABLE_NAME` VARCHAR(50) NOT NULL COMMENT '테이블명',
    `COLUMN_NAME` VARCHAR(50) NOT NULL COMMENT '컬럼명',
    `SEQUENCE_NUMBER` BIGINT NOT NULL COMMENT '채번',

    `IS_ACTIVE` BOOLEAN NOT NULL COMMENT 'Record 사용유무',
    `CREATED_AT` DATETIME NOT NULL DEFAULT NOW() COMMENT 'Record 생성일',
    `CREATE_USER_ID` VARCHAR(50) COMMENT 'Record 생성자ID',
    `CREATE_USER_NAME` VARCHAR(50) COMMENT 'Record 생성자명',
    `CREATE_IP` VARCHAR(15) COMMENT 'Record 생성IP',
    `UPDATED_AT` DATETIME NULL DEFAULT NOW() ON UPDATE NOW() COMMENT 'Record 수정일',
    `UPDATE_USER_ID` VARCHAR(50) COMMENT 'Record 수정자ID',
    `UPDATE_USER_NAME` VARCHAR(50) COMMENT 'Record 수정자명',
    `UPDATE_IP` VARCHAR(15) COMMENT 'Record 수정IP',
    `VERSION` BIGINT DEFAULT 0 NOT NULL COMMENT '버전',

    PRIMARY KEY (`SHARED_CODE_SEQ_MANAGEMENT_SEQ`),
    UNIQUE KEY `UNIQUE_SEQ_MANAGEMENT_IDX_01` (`TABLE_NAME`, `COLUMN_NAME`, `SEQUENCE_NUMBER`)

) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci COMMENT='통합 시퀀스(채번) 관리 테이블';

-- 통합 코드관리 테이블 생성
CREATE TABLE if not exists `SHARED_CODE`.`SHARED_CODE_MANAGEMENT` (
    `SHARED_CODE_MANAGEMENT_SEQ` BIGINT NOT NULL AUTO_INCREMENT COMMENT '코드 SEQ',
    `CODE_TYPE` VARCHAR(20) NOT NULL COMMENT '코드 유형 (예: SYSTEM, CATEGORY, GROUP, ENUM)',
    `PARENT_CODE` VARCHAR(10) NULL COMMENT '상위 코드',
    `CODE` VARCHAR(10) NOT NULL COMMENT '코드',
    `NAME` VARCHAR(20) NOT NULL COMMENT '코드명',
    `DESCRIPTION` VARCHAR(255) COMMENT '코드설명',
    `SORT_ORDER` INT COMMENT '정렬순서',

    `IS_ACTIVE` BOOLEAN NOT NULL COMMENT 'Record 사용유무',
    `CREATED_AT` DATETIME NOT NULL DEFAULT NOW() COMMENT 'Record 생성일',
    `CREATE_USER_ID` VARCHAR(50) COMMENT 'Record 생성자ID',
    `CREATE_USER_NAME` VARCHAR(50) COMMENT 'Record 생성자명',
    `CREATE_IP` VARCHAR(15) COMMENT 'Record 생성IP',
    `UPDATED_AT` DATETIME NULL DEFAULT NOW() ON UPDATE NOW() COMMENT 'Record 수정일',
    `UPDATE_USER_ID` VARCHAR(50) COMMENT 'Record 수정자ID',
    `UPDATE_USER_NAME` VARCHAR(50) COMMENT 'Record 수정자명',
    `UPDATE_IP` VARCHAR(15) COMMENT 'Record 수정IP',
    `VERSION` BIGINT DEFAULT 0 NOT NULL COMMENT '버전',

    PRIMARY KEY (`SHARED_CODE_MANAGEMENT_SEQ`),
    UNIQUE KEY `UNIQUE_CODE_MANAGEMENT_IDX_01` (`CODE_TYPE`, `CODE`)

) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci COMMENT='통합 코드 관리 테이블';

-- 코드상세별 코드속성관리 테이블 생성
CREATE TABLE IF NOT EXISTS `SHARED_CODE`.`SHARED_CODE_DETAIL_ATTRIBUTE_MANAGEMENT` (
    `SHARED_CODE_DETAIL_ATTRIBUTE_MANAGEMENT_SEQ` BIGINT NOT NULL AUTO_INCREMENT COMMENT '코드 상세별 코드 속성 SEQ',
    `CODE_TYPE` VARCHAR(20) NOT NULL COMMENT '코드 유형 (예: SYSTEM, CATEGORY, GROUP, ENUM)',
    `CODE` VARCHAR(10) NOT NULL COMMENT '코드',

    `ATTRIBUTE_CODE` VARCHAR(10) NOT NULL COMMENT '코드 속성코드',
    `ATTRIBUTE_NAME` VARCHAR(20) NOT NULL COMMENT '코드 속성명',
    `ATTRIBUTE_DESCRIPTION` VARCHAR(255) COMMENT '코드 속성설명',
    `START_DATE` DATETIME COMMENT '시작일자',
    `END_DATE` DATETIME COMMENT '종료일자',

    `IS_ACTIVE` BOOLEAN NOT NULL COMMENT 'Record 사용유무',
    `CREATED_AT` DATETIME NOT NULL DEFAULT NOW() COMMENT 'Record 생성일',
    `CREATE_USER_ID` VARCHAR(50) COMMENT 'Record 생성자ID',
    `CREATE_USER_NAME` VARCHAR(50) COMMENT 'Record 생성자명',
    `CREATE_IP` VARCHAR(15) COMMENT 'Record 생성IP',
    `UPDATED_AT` DATETIME NULL DEFAULT NOW() ON UPDATE NOW() COMMENT 'Record 수정일',
    `UPDATE_USER_ID` VARCHAR(50) COMMENT 'Record 수정자ID',
    `UPDATE_USER_NAME` VARCHAR(50) COMMENT 'Record 수정자명',
    `UPDATE_IP` VARCHAR(15) COMMENT 'Record 수정IP',
    `VERSION` BIGINT DEFAULT 0 NOT NULL COMMENT '버전',

    PRIMARY KEY (`SHARED_CODE_DETAIL_ATTRIBUTE_MANAGEMENT_SEQ`),
    UNIQUE KEY `UNIQUE_DETAIL_ATTRIBUTE_MANAGEMENT_IDX_01` (`CODE_TYPE`, `CODE`, `ATTRIBUTE_CODE`)

) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci COMMENT='코드 상세 속성 관리 테이블';

-- 프로그램관리 테이블 생성
CREATE TABLE IF NOT EXISTS `SHARED_CODE`.`SHARED_CODE_PROGRAM_MANAGEMENT` (
    `SHARED_CODE_PROGRAM_MANAGEMENT_SEQ` BIGINT NOT NULL AUTO_INCREMENT COMMENT '프로그램 SEQ',
    `CODE_TYPE` VARCHAR(20) NOT NULL COMMENT '코드 유형 (예: SYSTEM, CATEGORY, GROUP, ENUM)',
    `CODE` VARCHAR(10) NOT NULL COMMENT '코드',

    `PROGRAM_ID` VARCHAR(10) COMMENT '프로그램ID',
    `PROGRAM_TYPE_CODE` VARCHAR(10) COMMENT '프로그램유형코드(00001:메인,00002:팝업)',
    `PROGRAM_NAME` VARCHAR(20) NOT NULL COMMENT '프로그램명',
    `PROGRAM_DESCRIPTION` VARCHAR(255) COMMENT '프로그램설명',
    `PROGRAM_PATH` VARCHAR(255) COMMENT '프로그램경로',
    `PROGRAM_PARAMETER` VARCHAR(255) COMMENT '프로그램파라미터(리스트 필터조건 ex.searchType=1&searchText=test&startSearchDate=2024-01-01;2024-02-01&endSearchDate=2024-01-01;2024-02-01&isUse=true)',
    `PROGRAM_USE_START_DATE` DATE COMMENT '프로그램사용시작일',
    `PROGRAM_USE_END_DATE` DATE COMMENT '프로그램사용종료일',
    `PROGRAM_SORT_ORDER` INT COMMENT '프로그램정렬순서',

    `IS_ACTIVE` BOOLEAN NOT NULL COMMENT 'Record 사용유무',
    `CREATED_AT` DATETIME NOT NULL DEFAULT NOW() COMMENT 'Record 생성일',
    `CREATE_USER_ID` VARCHAR(50) COMMENT 'Record 생성자ID',
    `CREATE_USER_NAME` VARCHAR(50) COMMENT 'Record 생성자명',
    `CREATE_IP` VARCHAR(15) COMMENT 'Record 생성IP',
    `UPDATED_AT` DATETIME NULL DEFAULT NOW() ON UPDATE NOW() COMMENT 'Record 수정일',
    `UPDATE_USER_ID` VARCHAR(50) COMMENT 'Record 수정자ID',
    `UPDATE_USER_NAME` VARCHAR(50) COMMENT 'Record 수정자명',
    `UPDATE_IP` VARCHAR(15) COMMENT 'Record 수정IP',
    `VERSION` BIGINT DEFAULT 0 NOT NULL COMMENT '버전',

    PRIMARY KEY (`SHARED_CODE_PROGRAM_MANAGEMENT_SEQ`),
    UNIQUE KEY `UNIQUE_PROGRAM_MANAGEMENT_IDX_01` (`CODE_TYPE`, `CODE`, `PROGRAM_ID`),
    UNIQUE KEY `UNIQUE_PROGRAM_MANAGEMENT_IDX_02` (`PROGRAM_PATH`)

) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci COMMENT='프로그램관리 테이블';

-- 메뉴관리 테이블 생성
CREATE TABLE IF NOT EXISTS `SHARED_CODE`.`SHARED_CODE_MENU_MANAGEMENT` (
    `SHARED_CODE_MENU_MANAGEMENT_SEQ` BIGINT NOT NULL AUTO_INCREMENT COMMENT '메뉴 SEQ',
    `CODE_TYPE` VARCHAR(20) NOT NULL COMMENT '코드 유형 (예: SYSTEM, CATEGORY, GROUP, ENUM)',
    `CODE` VARCHAR(10) NOT NULL COMMENT '코드',

    `UPPER_MENU_ID` BIGINT COMMENT '상위메뉴ID',

    `MENU_CODE` VARCHAR(10) COMMENT '메뉴코드',
    `MENU_LEVEL` INT NOT NULL DEFAULT 0 COMMENT '메뉴레벨',
    `MENU_NAME` VARCHAR(20) NOT NULL COMMENT '메뉴명',
    `MENU_SORT_ORDER` INT COMMENT '메뉴정렬순서',
    `MENU_USE_START_DATE` DATETIME COMMENT '메뉴사용시작일',
    `MENU_USE_END_DATE` DATETIME COMMENT '메뉴사용종료일',
    `MENU_DESCRIPTION` VARCHAR(255) COMMENT '메뉴설명',
    `MENU_TYPE_CODE` VARCHAR(10) COMMENT '메뉴유형코드',
    `MENU_TYPE_NAME` VARCHAR(20) COMMENT '메뉴유형명',
    `MENU_TYPE_DESCRIPTION` VARCHAR(255) COMMENT '메뉴유형설명',
    `MENU_PARAMETER` VARCHAR(255) COMMENT '메뉴파라미터',
    `MULTI_OPEN_STATUS` BOOLEAN COMMENT '다중오픈여부',
    `HELP_PAGE_LINK` VARCHAR(255) COMMENT '헬프 페이지 링크',

    `IS_ACTIVE` BOOLEAN NOT NULL DEFAULT TRUE COMMENT 'Record 사용유무',
    `CREATED_AT` DATETIME NOT NULL DEFAULT NOW() COMMENT 'Record 생성일',
    `CREATE_USER_ID` VARCHAR(50) COMMENT 'Record 생성자ID',
    `CREATE_USER_NAME` VARCHAR(50) COMMENT 'Record 생성자명',
    `CREATE_IP` VARCHAR(15) COMMENT 'Record 생성IP',
    `UPDATED_AT` DATETIME NULL DEFAULT NOW() ON UPDATE NOW() COMMENT 'Record 수정일',
    `UPDATE_USER_ID` VARCHAR(50) COMMENT 'Record 수정자ID',
    `UPDATE_USER_NAME` VARCHAR(50) COMMENT 'Record 수정자명',
    `UPDATE_IP` VARCHAR(15) COMMENT 'Record 수정IP',
    `VERSION` BIGINT DEFAULT 0 NOT NULL COMMENT '버전',

    PRIMARY KEY (`SHARED_CODE_MENU_MANAGEMENT_SEQ`),
    UNIQUE KEY `UNIQUE_MENU_MANAGEMENT_IDX_01` (`CODE_TYPE`, `CODE`, `UPPER_MENU_ID`, `MENU_CODE`)

) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci COMMENT='메뉴관리 테이블';

-- 권한 그룹 테이블: 권한 그룹 정보를 저장합니다.
CREATE TABLE IF NOT EXISTS `SHARED_CODE`.`SHARED_CODE_PERMISSION_GROUP` (
    `SHARED_CODE_PERMISSION_GROUP_SEQ` BIGINT NOT NULL AUTO_INCREMENT COMMENT '권한 그룹 SEQ',
    `CODE_TYPE` VARCHAR(20) NOT NULL COMMENT '코드 유형 (예: SYSTEM, CATEGORY, GROUP, ENUM)',
    `CODE` VARCHAR(10) NOT NULL COMMENT '코드',

    `PERMISSION_GROUP_ID` VARCHAR(20) NOT NULL COMMENT '권한그룹ID',
    `PERMISSION_GROUP_NAME` VARCHAR(20) NOT NULL COMMENT '권한 그룹 이름',
    `PERMISSION_GROUP_DESCRIPTION` VARCHAR(255) DEFAULT NULL COMMENT '권한 그룹 설명',
    `PERMISSION_GROUP_START_DATE` DATETIME COMMENT '권한그룹적용시작일',
    `PERMISSION_GROUP_END_DATE` DATETIME COMMENT '권한그룹적용종료일',

    `IS_ACTIVE` BOOLEAN NOT NULL DEFAULT TRUE COMMENT 'Record 사용유무 (예: true)',
    `CREATED_AT` DATETIME NOT NULL DEFAULT NOW() COMMENT 'Record 생성일 (예: 2023-06-17T10:15:30Z)',
    `CREATE_USER_ID` VARCHAR(50) COMMENT 'Record 생성자ID (예: admin)',
    `CREATE_USER_NAME` VARCHAR(50) COMMENT 'Record 생성자명 (예: admin user)',
    `CREATE_IP` VARCHAR(15) COMMENT 'Record 생성IP (예: 192.168.1.1)',
    `UPDATED_AT` DATETIME NULL DEFAULT NOW() ON UPDATE NOW() COMMENT 'Record 수정일 (예: 2023-06-17T10:15:30Z)',
    `UPDATE_USER_ID` VARCHAR(50) COMMENT 'Record 수정자ID (예: admin)',
    `UPDATE_USER_NAME` VARCHAR(50) COMMENT 'Record 수정자명 (예: admin user)',
    `UPDATE_IP` VARCHAR(15) COMMENT 'Record 수정IP (예: 192.168.1.1)',
    `VERSION` BIGINT DEFAULT 0 NOT NULL COMMENT '버전',

    PRIMARY KEY (`SHARED_CODE_PERMISSION_GROUP_SEQ`),
    UNIQUE KEY `UNIQUE_PERMISSION_GROUP_IDX_01` (`CODE_TYPE`, `CODE`, `PERMISSION_GROUP_ID`),
    UNIQUE KEY `UNIQUE_PERMISSION_GROUP_IDX_02` (`PERMISSION_GROUP_ID`)

) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci COMMENT='권한 그룹 테이블';

-- 권한 테이블: 권한 정보를 저장합니다.
CREATE TABLE IF NOT EXISTS `SHARED_CODE`.`SHARED_CODE_PERMISSION` (
    `SHARED_CODE_PERMISSION_SEQ` BIGINT NOT NULL AUTO_INCREMENT COMMENT '권한 SEQ',

    `NAME` VARCHAR(20) NOT NULL COMMENT '권한 이름',
    `TYPE` VARCHAR(20) NOT NULL COMMENT '권한 유형 (예: 메뉴사용, 추가, 조회, 수정, 삭제, 비활성, 사용자이벤트1, 사용자이벤트2)',

    `IS_ACTIVE` BOOLEAN NOT NULL DEFAULT TRUE COMMENT 'Record 사용유무 (예: true)',
    `CREATED_AT` DATETIME NOT NULL DEFAULT NOW() COMMENT 'Record 생성일 (예: 2023-06-17T10:15:30Z)',
    `CREATE_USER_ID` VARCHAR(50) COMMENT 'Record 생성자ID (예: admin)',
    `CREATE_USER_NAME` VARCHAR(50) COMMENT 'Record 생성자명 (예: admin user)',
    `CREATE_IP` VARCHAR(15) COMMENT 'Record 생성IP (예: 192.168.1.1)',
    `UPDATED_AT` DATETIME NULL DEFAULT NOW() ON UPDATE NOW() COMMENT 'Record 수정일 (예: 2023-06-17T10:15:30Z)',
    `UPDATE_USER_ID` VARCHAR(50) COMMENT 'Record 수정자ID (예: admin)',
    `UPDATE_USER_NAME` VARCHAR(50) COMMENT 'Record 수정자명 (예: admin user)',
    `UPDATE_IP` VARCHAR(15) COMMENT 'Record 수정IP (예: 192.168.1.1)',
    `VERSION` BIGINT DEFAULT 0 NOT NULL COMMENT '버전',

    PRIMARY KEY (`SHARED_CODE_PERMISSION_SEQ`)

) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci COMMENT='권한 테이블';

-- 권한 그룹과 권한의 관계 테이블: 권한 그룹과 권한 간의 관계를 저장합니다.
CREATE TABLE IF NOT EXISTS `SHARED_CODE`.`SHARED_CODE_PERMISSION_GROUP_RELATION` (
    `SHARED_CODE_PERMISSION_GROUP_RELATION_SEQ` BIGINT NOT NULL AUTO_INCREMENT COMMENT '관계 SEQ',
    `PERMISSION_GROUP_SEQ` BIGINT NOT NULL COMMENT '권한 그룹 SEQ',
    `PERMISSION_SEQ` BIGINT NOT NULL COMMENT '권한 SEQ',

    `IS_ACTIVE` BOOLEAN NOT NULL DEFAULT TRUE COMMENT 'Record 사용유무 (예: true)',
    `CREATED_AT` DATETIME NOT NULL DEFAULT NOW() COMMENT 'Record 생성일 (예: 2023-06-17T10:15:30Z)',
    `CREATE_USER_ID` VARCHAR(50) COMMENT 'Record 생성자ID (예: admin)',
    `CREATE_USER_NAME` VARCHAR(50) COMMENT 'Record 생성자명 (예: admin user)',
    `CREATE_IP` VARCHAR(15) COMMENT 'Record 생성IP (예: 192.168.1.1)',
    `UPDATED_AT` DATETIME NULL DEFAULT NOW() ON UPDATE NOW() COMMENT 'Record 수정일 (예: 2023-06-17T10:15:30Z)',
    `UPDATE_USER_ID` VARCHAR(50) COMMENT 'Record 수정자ID (예: admin)',
    `UPDATE_USER_NAME` VARCHAR(50) COMMENT 'Record 수정자명 (예: admin user)',
    `UPDATE_IP` VARCHAR(15) COMMENT 'Record 수정IP (예: 192.168.1.1)',
    `VERSION` BIGINT DEFAULT 0 NOT NULL COMMENT '버전',

    PRIMARY KEY (`SHARED_CODE_PERMISSION_GROUP_RELATION_SEQ`)

) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci COMMENT='권한 그룹과 권한의 관계 테이블';


-- 권한 그룹과 사용자의 관계 테이블: 권한 그룹과 사용자 간의 관계를 저장합니다.
CREATE TABLE IF NOT EXISTS `SHARED_CODE`.`SHARED_CODE_PERMISSION_GROUP_USER_RELATION` (
    `SHARED_CODE_PERMISSION_GROUP_USER_RELATION_SEQ` BIGINT NOT NULL AUTO_INCREMENT COMMENT '관계 SEQ',
    `PERMISSION_GROUP_SEQ` BIGINT NOT NULL COMMENT '권한 그룹 SEQ',
    `LOGIN_ID` VARCHAR(20) NOT NULL COMMENT '사용자 로그인 ID',

    `IS_ACTIVE` BOOLEAN NOT NULL DEFAULT TRUE COMMENT 'Record 사용유무 (예: true)',
    `CREATED_AT` DATETIME NOT NULL DEFAULT NOW() COMMENT 'Record 생성일 (예: 2023-06-17T10:15:30Z)',
    `CREATE_USER_ID` VARCHAR(50) COMMENT 'Record 생성자ID (예: admin)',
    `CREATE_USER_NAME` VARCHAR(50) COMMENT 'Record 생성자명 (예: admin user)',
    `CREATE_IP` VARCHAR(15) COMMENT 'Record 생성IP (예: 192.168.1.1)',
    `UPDATED_AT` DATETIME NULL DEFAULT NOW() ON UPDATE NOW() COMMENT 'Record 수정일 (예: 2023-06-17T10:15:30Z)',
    `UPDATE_USER_ID` VARCHAR(50) COMMENT 'Record 수정자ID (예: admin)',
    `UPDATE_USER_NAME` VARCHAR(50) COMMENT 'Record 수정자명 (예: admin user)',
    `UPDATE_IP` VARCHAR(15) COMMENT 'Record 수정IP (예: 192.168.1.1)',
    `VERSION` BIGINT DEFAULT 0 NOT NULL COMMENT '버전',

    PRIMARY KEY (`SHARED_CODE_PERMISSION_GROUP_USER_RELATION_SEQ`)

) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci COMMENT='권한 그룹과 사용자의 관계 테이블';
